<!DOCTYPE html>
<html lang="ko" xml:lang="ko" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:include="fragments/header"></th:block>
    <script type="text/javascript">
        function fn_codeList(obj) {
            var option = '<option value="">전체</option>';
            if ($(obj).val() != '') {
                var jsonData = {
                    'prntCodePid': $(obj).val()
                }
                $.ajax({
                    type: 'post',
                    url: '/api/commonCode/listForUppCdPid',
                    contentType: "application/json",
                    data: JSON.stringify(jsonData),
                    datatype: 'json',
                    success: function (data) {
                        if (data.length != 0) {
                            for (var i = 0; i < data.length; i++) {
                                option += '<option value="' + data[i].id + '">' + data[i].codeNm + '</option>';
                            }
                            $('#srchGbnChildLabel').text('전체');
                            $('#srchGbnChild').html(option).niceSelect('update');
                        }
                    },
                    error: function (error) {
                        //alert('save error!!!');
                        alert('error::' + error.statusText);
                    }
                });
            } else {
                $('#srchGbnChildLabel').text('전체');
                $('#srchGbnChild').html(option).niceSelect('update');
            }
        }

        function fn_loginCheck() {
            alert('로그인이 필요한 기능입니다.');
            location.href = '/login';
        }

        function fn_message() {
            alert('서비스 준비중입니다.');
            return false;
        }

        $(function () {
            if ('[[${searchForm.srchGbnParent}]]' != '') {
                var srchGbnParent = '[[${searchForm.srchGbnParent}]]';
                var jsonData = {
                    'prntCodePid': srchGbnParent
                }
                $.ajax({
                    type: 'post',
                    url: '/api/commonCode/listForUppCdPid',
                    contentType: "application/json",
                    data: JSON.stringify(jsonData),
                    datatype: 'json',
                    success: function (data) {
                        //console.log(data);
                        var label = '전체';
                        var option = '<option value="">전체</option>';
                        for (var i = 0; i < data.length; i++) {
                            option += '<option value="' + data[i].id + '" ';
                            if ('[[${searchForm.srchGbnChild}]]' == data[i].id) {
                                option += 'selected';
                                $('#srchGbnChildLabel').text(data[i].codeNm);
                            }
                            option += '>' + data[i].codeNm + '</option>';
                        }

                        $('#srchGbnChild').html(option).niceSelect('update');
                    },
                    error: function (error) {
                        //alert('save error!!!');
                        alert('error::' + error.statusText);
                    }
                });
            }
        });
    </script>

</head>
<body oncontextmenu='return false' onselectstart='return false' ondragstart='return false'>
<div id="wrap">
    <th:block th:include="fragments/header_gnb"></th:block>
    <div id="container">
        <th:block th:include="fragments/mo_menu"></th:block>
        <div class="sub_container">
            <th:block th:include="fragments/dept_menu"></th:block>
            <form id="form1" name="form1" method="post" th:object="${searchForm}">
            <div class="inner">
                <div class="page_cont">
                    <!--<h4 class="subtit pc review_title">교육후기</h4>-->
                    <div class="sub_text_box review_text_box">
                        <img src="/ClientUI/user/images/contents/lecture/review.png" alt="review.png" class="review_text_img">
                        <div class="text">
                            <p class="title">우리 친구들이 탐험을 통해 획득한 6가지 친사회적 능력을 마음껏 발휘해보세요.</p>
                            <span class="sub">
                                    사전학습, 현장교육, 사후학습을 모두 들었다면, 푸코가 안내하는 인증미션을 진행하고<b></b>
                                    인증샷(사진 또는 동영상)을 찍어 푸른코끼리 앱에 업로드 해주세요!
                                </span>
                        </div>
                    </div>
                    <div class="board_top review_board">
                        <div class="select_bx">
                            <div class="select w160 title">
                                <label th:for="srchGbnParent">
                                    <th:block th:if="*{srchGbnParent eq '' or srchGbnParent eq null}">전체</th:block>
                                    <th:block th:each="item : ${commonCodes}">
                                        <th:block th:if="${searchForm.srchGbnParent eq item.id}" th:text="${item.codeNm}">제목</th:block>
                                    </th:block>
                                </label>
                                <select th:field="*{srchGbnParent}" onchange="fn_codeList(this)">
                                    <option value="" selected>전체</option>
                                    <th:block th:each="item : ${commonCodes}">
                                        <option th:value="${item.id}" th:text="${item.codeNm}"></option>
                                    </th:block>
                                </select>
                            </div>
                            <div class="select w160 subject">
                                <label id="srchGbnChildLabel" th:for="srchGbnChild">
                                    <th:block th:if="*{srchGbnChild eq '' or srchGbnChild eq null}">전체</th:block>
                                </label>
                                <select th:field="*{srchGbnChild}">
                                    <option value="" selected>전체</option>
                                </select>
                            </div>
                        </div>
                        <div class="select_bx2">
                            <div class="search news">
                                <input type="search" th:field="*{srchWord}" placeholder="검색어를 입력해 주세요" />
                            </div>
                            <button type="submit" class="btn btn_blue btn_pill_10">검색</button>
                        </div>
                    </div>
                    <div class="btn_tab">
                        <th:block th:if="${#authentication.principal == 'anonymousUser'}">
                            <a href="javascript:fn_loginCheck();" class="btn btn_review btn_pill">작성하기</a>
                        </th:block>
                        <a href="javascript:;" class="btn btn_review btn_pill" onclick="fn_message()">교육신청</a>
                    </div>
                    <ul class="thumb_list clearfix">
                        <th:block th:if="${postscripts == null or postscripts.isEmpty()}"><!--등록된 글 없을경우-->
                            <li class="nodata">
                                <div>등록된 게시글이 없습니다.</div>
                            </li>
                        </th:block>
                        <li th:each="item : ${postscripts}">
                            <a th:href="|/pages/activity/postscriptDetail/${item.id}|">
                                    <span class="thumb"><img th:src="|${filePath}/${item.imgFl}|" th:alt="${item.imgFl}"
                                                             onerror="this.src='/ClientUI/user/images/contents/nodata01.png'"/></span>
                                <strong class="tit" th:text="${item.ttl}">사이버폭력이 사라지는 그날까지</strong>
                                <span class="date"
                                      th:text="${#temporals.format(item.regDtm,'yyyy.MM.dd')}">2020.06.30</span>
                            </a>
                        </li>
                    </ul>
                </div>
                <th:block
                        th:replace="/fragments/paging :: pagingbody(list=${postscripts}, link='/pages/activity/postscript', formId='form1')"></th:block>
            </div>
            </form>
<!--            <form id="form1" name="form1" method="post" th:object="${searchForm}">-->

<!--                <div class="contents">-->
<!--                    <div class="inner">-->
<!--                        <div class="page_cont">-->
<!--                            <h4 class="subtit pc review_title">교육후기</h4>-->
<!--                            <div class="sub_text_box review_text_box">-->
<!--                                <img src="/ClientUI/user/images/contents/lecture/review.png" alt="review.png" class="review_text_img">-->
<!--                                <div class="text">-->
<!--                                    <p class="title">우리 친구들이 탐험을 통해 획득한 6가지 친사회적 능력을 마음껏 발휘해보세요.</p>-->
<!--                                    <span class="sub">-->
<!--                                    사전학습, 현장교육, 사후학습을 모두 들었다면, 푸코가 안내하는 인증미션을 진행하고<b></b>-->
<!--                                    인증샷(사진 또는 동영상)을 찍어 푸른코끼리 앱에 업로드 해주세요!-->
<!--                                </span>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="board_top review_board">-->
<!--                                <div class="select w160 title">-->
<!--                                    <label th:for="srchGbnParent">-->
<!--                                        <th:block th:if="*{srchGbnParent eq '' or srchGbnParent eq null}">전체</th:block>-->
<!--                                        <th:block th:each="item : ${commonCodes}">-->
<!--                                            <th:block th:if="${searchForm.srchGbnParent eq item.id}" th:text="${item.codeNm}">제목</th:block>-->
<!--                                        </th:block>-->
<!--                                    </label>-->
<!--                                    <select th:field="*{srchGbnParent}" onchange="fn_codeList(this)">-->
<!--                                        <option value="" selected>전체</option>-->
<!--                                        <th:block th:each="item : ${commonCodes}">-->
<!--                                            <option th:value="${item.id}" th:text="${item.codeNm}"></option>-->
<!--                                        </th:block>-->
<!--                                    </select>-->
<!--                                </div>-->
<!--                                <div class="select w160 subject">-->
<!--                                    <label id="srchGbnChildLabel" th:for="srchGbnChild">-->
<!--                                        <th:block th:if="*{srchGbnChild eq '' or srchGbnChild eq null}">전체</th:block>-->
<!--                                    </label>-->
<!--                                    <select th:field="*{srchGbnChild}">-->
<!--                                        <option value="" selected>전체</option>-->
<!--                                    </select>-->
<!--                                </div>-->
<!--                                <div class="search news">-->
<!--                                    <input type="search" th:field="*{srchWord}" placeholder="검색어를 입력해 주세요" />-->
<!--                                </div>-->
<!--                                <button type="submit" class="btn btn_blue btn_pill_10">검색</button>-->
<!--                            </div>-->
<!--                            <div class="btn_tab">-->
<!--                                <th:block th:if="${#authentication.principal == 'anonymousUser'}">-->
<!--                                    <a href="javascript:fn_loginCheck();" class="btn btn_review btn_pill">작성하기</a>-->
<!--                                </th:block>-->
<!--                                <a href="javascript:;" class="btn btn_review btn_pill" onclick="fn_message()">교육신청</a>-->
<!--                            </div>-->
<!--                            <ul class="thumb_list clearfix">-->
<!--                                <th:block th:if="${postscripts == null or postscripts.isEmpty()}">&lt;!&ndash;등록된 글 없을경우&ndash;&gt;-->
<!--                                    <li class="nodata">-->
<!--                                        <div>등록된 게시글이 없습니다.</div>-->
<!--                                    </li>-->
<!--                                </th:block>-->
<!--                                <li th:each="item : ${postscripts}">-->
<!--                                    <a th:href="|/pages/activity/postscriptDetail/${item.id}|">-->
<!--                                    <span class="thumb"><img th:src="|${filePath}/${item.imgFl}|" th:alt="${item.imgFl}"-->
<!--                                                             onerror="this.src='/ClientUI/user/images/contents/nodata01.png'"/></span>-->
<!--                                        <strong class="tit" th:text="${item.ttl}">사이버폭력이 사라지는 그날까지</strong>-->
<!--                                        <span class="date"-->
<!--                                              th:text="${#temporals.format(item.regDtm,'yyyy.MM.dd')}">2020.06.30</span>-->
<!--                                    </a>-->
<!--                                </li>-->
<!--                            </ul>-->
<!--                        </div>-->
<!--                        <th:block-->
<!--                                th:replace="/fragments/paging :: pagingbody(list=${postscripts}, link='/pages/activity/postscript', formId='form1')"></th:block>-->
<!--                    </div>-->
<!--                   -->
<!--                </div>-->
<!--            </form>-->
        </div>
    </div>
    <th:block th:replace="fragments/footer"></th:block>
</div>
</body>
</html>